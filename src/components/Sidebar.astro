---
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';
import myProfilePic from "../assets/davi.jpg"; 
import ThemeToggle from './ThemeToggle.astro';
---

<aside class="sidebar">
  <div class="card">
    <div class="card-main"> 
    <a href="/" class="profile-pic-link">
      <Image
        src={myProfilePic}
        alt="Davi Carneiro"
        class="profile-pic"
        width={150}
        height={150}
        format='webp'
        />
    </a>


    <h1>Davi Carneiro</h1>
    <h2>Professor e Desenvolvedor</h2>

    <nav class="main-nav">
      <a href="/">Início</a>
      <a href="/blog">Blog</a>
      <a href="/contato">Contato</a>
    </nav>
  </div>

  <footer class="card-footer">
    <nav class="social-nav">
      <a href="https://github.com/..." target="_blank" aria-label="Github"> <Icon name="mdi:github"/></a>
      <a href="https://linkedin.com/..." target="_blank" aria-label="LinkedIn"><Icon name="mdi:linkedin"/></a>
      <a href="https://x.com/..." target="_blank" aria-label="X"><Icon name="mdi:twitter"/></a>
      <a href="https://researchgate.net/..." target="_blank" aria-label="ResearchGate"><Icon name="mdi:school-outline"/></a>
      <a href="https://lattes.cnpq.br/..." target="_blank" aria-label="Lattes"><Icon name="mdi:account-box-outline"/></a>
    </nav>
  
    <ThemeToggle />
    <footer/>
  </div >

</aside>

<style>
  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: var(--sidebar-width);
    height: 100vh;
    background: var(--color-bg-sidebar);
    border-right: 1px solid var(--color-border);
    padding: 2rem;
    display: flex;
    overflow-y: auto; 
  }

  .profile-pic {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 5px solid var(--color-bg); /* <- USA VARIÁVEL */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin-bottom: 1rem;
  }

  h1 {
    font-size: 1.5rem;
    margin: 0.5rem 0 0.25rem;
  }

  h2 {
    font-size: 1rem;
    font-weight: 400;
    color: #555;
    margin: 0 0 1.5rem;
  }

  .main-nav {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
    margin-bottom: 1.5rem;
  }

  .main-nav a {
    text-decoration: none;
    color: var(--color-text); /* <- USA VARIÁVEL */
    font-weight: 500;
    padding: 0.5rem;
    border-radius: var(--border-radius); /* <- USA VARIÁVEL */
  }
  .main-nav a:hover {
    background: var(--color-bg-hover); /* <- USA VARIÁVEL */
  }

  .social-nav a {
    text-decoration: none;
    color: #555; /* Podemos manter ou criar uma var --color-icon */
  }
  .social-nav a:hover {
    color: var(--color-primary); /* <- USA VARIÁVEL */
  }
  
  .social-nav :global(svg) {
    width: 28px;
    height: 28px;
  }

/* 2. ESTE É O NOVO BLOCO DE ESTILO */
  .card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 100%;
    flex-grow: 1; /* O card se estica na altura */
  }

  .card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 100%; /* O card ocupa toda a sidebar */
    flex-grow: 1;  /* O card se estica para preencher o espaço vertical */

    /* A altura do card precisa ser 100% da sidebar
       para que o 'auto' tenha para onde "empurrar" */
    height: 100%;
    width: 100%; 
  }

  .card-main {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%; /* Garante que os links da main-nav ocupem a largura */
  }

  .card-footer {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    gap: 1rem;
    margin-top: auto; /* EMPURRA O GRUPO INTEIRO PARA BAIXO */
    margin-bottom: 3rem;
  }

  /* --- Layout Mobile --- */
  @media (max-width: 768px) {
    .sidebar {
      display: none; /* Esconde completamente no mobile */
    }
  }
</style>